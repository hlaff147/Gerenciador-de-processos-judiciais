<div *ngIf="proccess">
  <div class="process-detail-body">
    <a class="nav-link" routerLink="/perfil">
      <i class="bi bi-arrow-left-circle"></i>
    </a>
    <h5 class="fs-2">{{ proccess.name }}</h5>
    <p>
      Juiz: <span class="fst-italic text-muted">{{ proccess.judge }}</span>
    </p>
    <p>
      Data de início:
      <span class="fst-italic text-muted"
        >{{ proccess.startDate.getDate() }}/{{
          proccess.startDate.getMonth()
        }}/{{ proccess.startDate.getFullYear() }}</span
      >
    </p>
    <div *ngIf="proccess.status === 'concluído'">
      <p>
        Status:
        <span class="fst-italic text-success">{{ proccess.status }}</span>
      </p>
    </div>
    <div *ngIf="proccess.status === 'atrasado'">
      <p>
        Status:
        <span class="fst-italic text-danger">{{ proccess.status }}</span>
      </p>
    </div>
    <div *ngIf="proccess.status === 'em andamento'">
      <p>
        Status:
        <span class="fst-italic text-primary">{{ proccess.status }}</span>
      </p>
    </div>

    <h5 class="fs-4 mb-4">Documentos do Processo</h5>
    <app-document-list
      [proccess-id]="proccess.id"
      (selectDocumentEvent)="selectDocument($event)"
    ></app-document-list>
  </div>

  <div *ngIf="selectedDoc">
    <app-document-detail
      [document]="selectedDoc"
      (unselectDocumentEvent)="unselectDocument()"
      (deleteDocumentEvent)="deleteDocument($event)"
    ></app-document-detail>
  </div>

  <div *ngIf="showDocModal">
    <div class="modal" tabindex="-1" aria-labelledby="addDocModalLabel">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addDocModalLabel">
              Adicione um documento
            </h5>
            <button
              (click)="toggleAddDocument()"
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body">
            <form #documentForm="ngForm">
              <div class="mb-3">
                <label for="inFile" class="form-label"
                  >Arquivo para anexo</label
                >
                <input
                  [(ngModel)]="selFile"
                  name="selFile"
                  #name="ngModel"
                  class="form-control"
                  type="file"
                  id="inFile"
                  required
                />
                <div
                  [hidden]="!submitted || fileIsValid"
                  class="alert alert-danger"
                  data-error="document-format"
                >
                  Os formatos de documento suportados são: PDF, PNG e JPG. Por
                  favor, escolha um deles
                </div>
              </div>
              <div class="mb-3">
                <label for="docName" class="form-label"
                  >Nome do documento</label
                >
                <input
                  [(ngModel)]="newDocName"
                  name="newDocName"
                  #name="ngModel"
                  type="text"
                  class="form-control"
                  id="newDocName"
                  required
                />
                <div
                  [hidden]="!submitted || newDocName != ''"
                  class="alert alert-danger"
                  data-error="document-name"
                >
                  o campo "Nome do documento" é obrigatório
                </div>
              </div>
              <div class="mb-3">
                <label for="inDate" class="form-label">Data de anexo</label>
                <input
                  [(ngModel)]="currDate"
                  name="currDate"
                  #name="ngModel"
                  type="date"
                  class="form-control"
                  id="inDate"
                  required
                />
                <div
                  [hidden]="!submitted || currDate"
                  class="alert alert-danger"
                  data-error="document-date"
                >
                  o campo "Data de anexo" é obrigatório
                </div>
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button
              (click)="toggleAddDocument()"
              type="button"
              class="btn btn-danger"
              data-btn="document-cancel"
            >
              Cancelar
            </button>
            <button
              (click)="validateFile()"
              type="button"
              class="btn btn-primary"
              data-btn="document-save"
            >
              Salvar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
